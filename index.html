<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1, user-scalable=no" />
<title>도화게임</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
  --line:#ffb347;
  --txt:#fff6e6;
  --panel:#3a1212;
  --muted:#ffd9a6;
}
body{
  margin:0;
  background:linear-gradient(135deg,#ffcf6e,#ff5e3a,#b31217);
  font-family:"Press Start 2P",sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:var(--txt);
}
.wrap{width:520px;}
.card{
  background:#00000022;
  border:2px solid var(--line);
  padding:14px;
  border-radius:12px;
}
.title h1{font-size:14px;margin:0 0 10px;}
.game{
  position:relative;
  height:500px;
  border:2px solid var(--line);
  overflow:hidden;
  border-radius:12px;
  background:#0f1224;
}
.player,.hazard,.coin{
  position:absolute;
  border-radius:50%; /* ⭐ 원형 처리 */
  background-size:cover;
  background-position:center;
}
.player{
  width:50px;
  height:50px;
  background-image:url("https://raw.githubusercontent.com/ttjdwls777-eng/XGP-MINI-GAME/main/%EB%B0%95%EB%8F%84.jpg");
}
.hazard{
  width:46px;
  height:46px;
  background-image:url("https://raw.githubusercontent.com/ttjdwls777-eng/XGP-MINI-GAME/main/%EB%8F%84%EC%9D%B8.jpg");
}
.coin{
  width:44px;
  height:44px;

  /* ⭐ 술병 이미지 */
  background-image:url("https://cdn-icons-png.flaticon.com/512/685/685352.png");
}
.hud{display:flex;gap:10px;margin-bottom:10px;font-size:10px;}
.pill{background:#00000055;padding:6px;border-radius:8px;}
.overlay{
  position:absolute;inset:0;
  display:flex;justify-content:center;align-items:center;
  background:#00000088;
}
button{
  border:2px solid var(--line);
  background:var(--panel);
  color:white;
  padding:10px;
  border-radius:10px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="wrap">

<div class="title"><h1>도화게임</h1></div>

<div class="card">

<div class="hud">
<div class="pill">시간 <b id="time">0</b></div>
<div class="pill">점수 <b id="score">0</b></div>
</div>

<div class="game" id="game">
<div class="player" id="player"></div>

<div class="overlay" id="overlay">
<button onclick="start()">게임 시작</button>
</div>
</div>

</div>
</div>

<script>
const game=document.getElementById("game");
const player=document.getElementById("player");
const overlay=document.getElementById("overlay");
const timeEl=document.getElementById("time");
const scoreEl=document.getElementById("score");

let running=false;
let px=200;
let score=0;
let startTime=0;

function setPlayer(x){
  px=Math.max(0,Math.min(game.clientWidth-50,x));
  player.style.left=px+"px";
  player.style.top=game.clientHeight-70+"px";
}

function spawn(type){
  const el=document.createElement("div");
  el.className=type;
  el.style.left=Math.random()*(game.clientWidth-50)+"px";
  el.style.top="-60px";
  game.appendChild(el);
  return el;
}

function hit(a,b){
  const ar=a.getBoundingClientRect();
  const br=b.getBoundingClientRect();
  return !(ar.right<br.left||ar.left>br.right||ar.bottom<br.top||ar.top>br.bottom);
}

function start(){
  overlay.style.display="none";
  running=true;
  score=0;
  startTime=Date.now();
  loop();
  setInterval(()=>spawn("hazard"),800);
  setInterval(()=>spawn("coin"),1200);
}

function loop(){
  if(!running)return;

  const items=[...game.querySelectorAll(".hazard,.coin")];
  items.forEach(el=>{
    let y=parseFloat(el.style.top);
    y+=3;
    el.style.top=y+"px";

    if(hit(player,el)){
      if(el.classList.contains("hazard")){
        running=false;
        overlay.style.display="flex";
      }else{
        score++;
        scoreEl.textContent=score;
        el.remove();
      }
    }
    if(y>game.clientHeight)el.remove();
  });

  timeEl.textContent=((Date.now()-startTime)/1000).toFixed(1);
  requestAnimationFrame(loop);
}

window.addEventListener("mousemove",e=>{
  const rect=game.getBoundingClientRect();
  setPlayer(e.clientX-rect.left-25);
});

setPlayer(px);
</script>
</body>
</html>
